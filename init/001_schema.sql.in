CREATE TABLE categoria (
    id INTEGER PRIMARY KEY,
    nombre TEXT NOT NULL UNIQUE,
    abreviatura TEXT NOT NULL UNIQUE
);

CREATE TABLE subcategoria (
    id INTEGER PRIMARY KEY,
    nombre TEXT NOT NULL,
    abreviatura TEXT NOT NULL,
    categoria_id INTEGER NOT NULL REFERENCES categoria(id)
);

CREATE TABLE familia (
    id INTEGER PRIMARY KEY,
    nombre TEXT NOT NULL,
    abreviatura TEXT NOT NULL,
    subcategoria_id INTEGER NOT NULL REFERENCES subcategoria(id)
);

CREATE TABLE via (
    id INTEGER PRIMARY KEY,
    nombre TEXT NOT NULL UNIQUE,
    abreviatura TEXT NOT NULL UNIQUE
);

CREATE TABLE productos (
    
    id SERIAL PRIMARY KEY,
    sku TEXT NOT NULL UNIQUE,
    familia_id INTEGER NOT NULL REFERENCES familia(id),
    via_id INTEGER NOT NULL REFERENCES via(id),

    marca TEXT,
    nombre TEXT NOT NULL,
    unidades_por_envase INTEGER,
    comentarios TEXT,
    foto_url TEXT,

    principio_activo TEXT,
    concentracion TEXT,
    forma_farmaceutica TEXT,

    sustancia_controlada BOOLEAN NOT NULL DEFAULT FALSE,
    requiere_serializacion BOOLEAN NOT NULL DEFAULT FALSE,

    pvp NUMERIC(10,2),
    stock INTEGER
);
